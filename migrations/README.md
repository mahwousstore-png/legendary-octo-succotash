# Database Migrations

هذا المجلد يحتوي على ملفات الهجرة (migrations) الخاصة بقاعدة البيانات.

## كيفية تطبيق التحديثات

### 1. تسجيل الدخول إلى Supabase Dashboard
افتح لوحة تحكم Supabase الخاصة بمشروعك

### 2. الانتقال إلى SQL Editor
- من القائمة الجانبية، اختر **SQL Editor**
- انقر على **New query**

### 3. تطبيق Migration 002_audit_system.sql

انسخ محتوى الملف `002_audit_system.sql` والصقه في محرر SQL، ثم اضغط **Run**.

هذا الملف يقوم بـ:
- إنشاء جدول `system_logs` لتسجيل جميع العمليات في النظام
- إضافة indexes للأداء الأفضل
- إضافة حقلين جديدين في جدول `employee_balance_transactions`:
  - `accepted_at`: تاريخ ووقت قبول/تأكيد المعاملة
  - `accepted_by`: المستخدم الذي قام بالقبول/التأكيد

### 4. التحقق من نجاح التطبيق

بعد تشغيل SQL، تحقق من:
- ✅ ظهور جدول `system_logs` في قاعدة البيانات
- ✅ وجود الحقول الجديدة في جدول `employee_balance_transactions`

## الملفات

- **002_audit_system.sql**: نظام سجل الأحداث والرقابة

## ملاحظات

- جميع الملفات تستخدم `IF NOT EXISTS` لتجنب الأخطاء عند التشغيل المتكرر
- التعديلات آمنة ولا تؤثر على البيانات الموجودة
- يمكن تشغيل الملفات مرة أخرى بدون مشاكل
